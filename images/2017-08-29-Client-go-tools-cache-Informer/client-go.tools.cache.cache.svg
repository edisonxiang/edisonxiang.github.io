<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="564px" preserveAspectRatio="none" style="width:777px;height:564px;" version="1.1" viewBox="0 0 777 564" width="777px" zoomAndPan="magnify"><defs><filter height="300%" id="fioa27j4sw9s7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Controller--><rect fill="#FEFECE" filter="url(#fioa27j4sw9s7)" height="86.4141" id="Controller" style="stroke: #A80036; stroke-width: 1.5;" width="204" x="248" y="8"/><ellipse cx="315.25" cy="24" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M316.2031,20.7813 L316.2031,27.2969 L317.9219,27.2969 C318.375,27.2969 318.5156,27.3281 318.6875,27.4531 C318.9219,27.625 319.0313,27.875 319.0313,28.1563 C319.0313,28.7188 318.6719,29 317.9219,29 L312.7813,29 C312.375,29 312.1719,28.9531 312.0156,28.8281 C311.7969,28.6719 311.6563,28.4063 311.6563,28.1563 C311.6563,27.8594 311.8125,27.5781 312.0625,27.4219 C312.2188,27.3125 312.3438,27.2969 312.7813,27.2969 L314.5,27.2969 L314.5,20.7813 L312.7813,20.7813 C312.3594,20.7813 312.1719,20.75 312.0156,20.6406 C311.7969,20.4688 311.6563,20.2188 311.6563,19.9375 C311.6563,19.6563 311.8125,19.3594 312.0625,19.2031 C312.2188,19.1094 312.3438,19.0938 312.7813,19.0938 L317.9219,19.0938 C318.375,19.0938 318.5156,19.125 318.6875,19.2344 C318.9219,19.4063 319.0313,19.6719 319.0313,19.9375 C319.0313,20.2344 318.8906,20.5156 318.625,20.6719 C318.5,20.75 318.3125,20.7813 317.9219,20.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="61" x="335.75" y="28.1543">Controller</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="249" x2="451" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="249" x2="451" y1="48" y2="48"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="254" y="62.2104">Run(stopCh &lt;-chan struct{})</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="254" y="75.0151">HasSynced() bool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="254" y="87.8198">LastSyncResourceVersion() string</text><!--class controller--><rect fill="#FEFECE" filter="url(#fioa27j4sw9s7)" height="99.2188" id="controller" style="stroke: #A80036; stroke-width: 1.5;" width="190" x="255" y="192.5"/><ellipse cx="315.75" cy="208.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M318.0938,204.1719 L318.2656,204.25 C318.4844,203.9375 318.6875,203.8438 318.9844,203.8438 C319.2813,203.8438 319.5625,203.9844 319.7188,204.25 C319.8125,204.4063 319.8281,204.5313 319.8281,204.9688 L319.8281,206.3906 C319.8281,206.8125 319.7969,207 319.6875,207.1563 C319.5156,207.375 319.25,207.5156 318.9844,207.5156 C318.7656,207.5156 318.5313,207.4063 318.3906,207.2656 C318.25,207.1406 318.2188,207.0156 318.1563,206.6094 C318.0625,206.2031 317.8906,205.9844 317.4063,205.7031 C316.9375,205.4531 316.3281,205.2969 315.75,205.2969 C314.0156,205.2969 312.7656,206.6094 312.7656,208.3906 L312.7656,209.4844 C312.7656,211.1875 314.0625,212.2813 316.1094,212.2813 C316.875,212.2813 317.5625,212.1563 317.9844,211.8906 C318.1719,211.7969 318.1719,211.7969 318.625,211.3125 C318.8125,211.125 319.0156,211.0469 319.2344,211.0469 C319.7031,211.0469 320.0938,211.4375 320.0938,211.8906 C320.0938,212.2813 319.7656,212.7344 319.1875,213.1406 C318.4375,213.6875 317.2813,213.9844 316.0625,213.9844 C313.1719,213.9844 311.0625,212.0938 311.0625,209.5156 L311.0625,208.3906 C311.0625,205.6719 313.0625,203.5938 315.6875,203.5938 C316.5625,203.5938 317.1563,203.7344 318.0938,204.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="336.25" y="212.6543">controller</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="256" x2="444" y1="224.5" y2="224.5"/><ellipse cx="266" cy="236.4023" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="275" y="238.7104">config         Config</text><ellipse cx="266" cy="249.207" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="275" y="251.5151">reflector      *Reflector</text><ellipse cx="266" cy="262.0117" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="275" y="264.3198">reflectorMutex sync.RWMutex</text><ellipse cx="266" cy="274.8164" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="275" y="277.1245">clock          clock.Clock</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="256" x2="444" y1="283.7188" y2="283.7188"/><!--class Config--><rect fill="#FEFECE" filter="url(#fioa27j4sw9s7)" height="137.6328" id="Config" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="6" y="173"/><ellipse cx="89.25" cy="189" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M91.5938,184.6719 L91.7656,184.75 C91.9844,184.4375 92.1875,184.3438 92.4844,184.3438 C92.7813,184.3438 93.0625,184.4844 93.2188,184.75 C93.3125,184.9063 93.3281,185.0313 93.3281,185.4688 L93.3281,186.8906 C93.3281,187.3125 93.2969,187.5 93.1875,187.6563 C93.0156,187.875 92.75,188.0156 92.4844,188.0156 C92.2656,188.0156 92.0313,187.9063 91.8906,187.7656 C91.75,187.6406 91.7188,187.5156 91.6563,187.1094 C91.5625,186.7031 91.3906,186.4844 90.9063,186.2031 C90.4375,185.9531 89.8281,185.7969 89.25,185.7969 C87.5156,185.7969 86.2656,187.1094 86.2656,188.8906 L86.2656,189.9844 C86.2656,191.6875 87.5625,192.7813 89.6094,192.7813 C90.375,192.7813 91.0625,192.6563 91.4844,192.3906 C91.6719,192.2969 91.6719,192.2969 92.125,191.8125 C92.3125,191.625 92.5156,191.5469 92.7344,191.5469 C93.2031,191.5469 93.5938,191.9375 93.5938,192.3906 C93.5938,192.7813 93.2656,193.2344 92.6875,193.6406 C91.9375,194.1875 90.7813,194.4844 89.5625,194.4844 C86.6719,194.4844 84.5625,192.5938 84.5625,190.0156 L84.5625,188.8906 C84.5625,186.1719 86.5625,184.0938 89.1875,184.0938 C90.0625,184.0938 90.6563,184.2344 91.5938,184.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="39" x="109.75" y="193.1543">Config</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="219" y1="205" y2="205"/><ellipse cx="17" cy="216.9023" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="26" y="219.2104">Queue</text><ellipse cx="17" cy="229.707" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="26" y="232.0151">ListerWatcher</text><ellipse cx="17" cy="242.5117" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="26" y="244.8198">Process ProcessFunc</text><ellipse cx="17" cy="255.3164" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="151" x="26" y="257.6245">ObjectType runtime.Object</text><ellipse cx="17" cy="268.1211" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="26" y="270.4292">FullResyncPeriod time.Duration</text><ellipse cx="17" cy="280.9258" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="188" x="26" y="283.2339">ShouldResync ShouldResyncFunc</text><ellipse cx="17" cy="293.7305" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="26" y="296.0386">RetryOnError bool</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="219" y1="302.6328" y2="302.6328"/><!--class Reflector--><rect fill="#FEFECE" filter="url(#fioa27j4sw9s7)" height="176.0469" id="Reflector" style="stroke: #A80036; stroke-width: 1.5;" width="286" x="480" y="154"/><ellipse cx="590.75" cy="170" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M593.0938,165.6719 L593.2656,165.75 C593.4844,165.4375 593.6875,165.3438 593.9844,165.3438 C594.2813,165.3438 594.5625,165.4844 594.7188,165.75 C594.8125,165.9063 594.8281,166.0313 594.8281,166.4688 L594.8281,167.8906 C594.8281,168.3125 594.7969,168.5 594.6875,168.6563 C594.5156,168.875 594.25,169.0156 593.9844,169.0156 C593.7656,169.0156 593.5313,168.9063 593.3906,168.7656 C593.25,168.6406 593.2188,168.5156 593.1563,168.1094 C593.0625,167.7031 592.8906,167.4844 592.4063,167.2031 C591.9375,166.9531 591.3281,166.7969 590.75,166.7969 C589.0156,166.7969 587.7656,168.1094 587.7656,169.8906 L587.7656,170.9844 C587.7656,172.6875 589.0625,173.7813 591.1094,173.7813 C591.875,173.7813 592.5625,173.6563 592.9844,173.3906 C593.1719,173.2969 593.1719,173.2969 593.625,172.8125 C593.8125,172.625 594.0156,172.5469 594.2344,172.5469 C594.7031,172.5469 595.0938,172.9375 595.0938,173.3906 C595.0938,173.7813 594.7656,174.2344 594.1875,174.6406 C593.4375,175.1875 592.2813,175.4844 591.0625,175.4844 C588.1719,175.4844 586.0625,173.5938 586.0625,171.0156 L586.0625,169.8906 C586.0625,167.1719 588.0625,165.0938 590.6875,165.0938 C591.5625,165.0938 592.1563,165.2344 593.0938,165.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="611.25" y="174.1543">Reflector</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="481" x2="765" y1="186" y2="186"/><ellipse cx="491" cy="197.9023" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="500" y="200.2104">name string</text><ellipse cx="491" cy="210.707" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="500" y="213.0151">expectedType reflect.Type</text><ellipse cx="491" cy="223.5117" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="500" y="225.8198">store Store</text><ellipse cx="491" cy="236.3164" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="500" y="238.6245">listerWatcher ListerWatcher</text><ellipse cx="491" cy="249.1211" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="500" y="251.4292">period       time.Duration</text><ellipse cx="491" cy="261.9258" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="500" y="264.2339">resyncPeriod time.Duration</text><ellipse cx="491" cy="274.7305" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="500" y="277.0386">clock clock.Clock</text><ellipse cx="491" cy="287.5352" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="181" x="500" y="289.8433">lastSyncResourceVersion string</text><ellipse cx="491" cy="300.3398" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="260" x="500" y="302.6479">lastSyncResourceVersionMutex sync.RWMutex</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="481" x2="765" y1="309.2422" y2="309.2422"/><ellipse cx="491" cy="321.1445" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="500" y="323.4526">ShouldResync func() bool</text><!--class Store--><rect fill="#FEFECE" filter="url(#fioa27j4sw9s7)" height="163.2422" id="Store" style="stroke: #A80036; stroke-width: 1.5;" width="363" x="398.5" y="390"/><ellipse cx="558.75" cy="406" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M559.7031,402.7813 L559.7031,409.2969 L561.4219,409.2969 C561.875,409.2969 562.0156,409.3281 562.1875,409.4531 C562.4219,409.625 562.5313,409.875 562.5313,410.1563 C562.5313,410.7188 562.1719,411 561.4219,411 L556.2813,411 C555.875,411 555.6719,410.9531 555.5156,410.8281 C555.2969,410.6719 555.1563,410.4063 555.1563,410.1563 C555.1563,409.8594 555.3125,409.5781 555.5625,409.4219 C555.7188,409.3125 555.8438,409.2969 556.2813,409.2969 L558,409.2969 L558,402.7813 L556.2813,402.7813 C555.8594,402.7813 555.6719,402.75 555.5156,402.6406 C555.2969,402.4688 555.1563,402.2188 555.1563,401.9375 C555.1563,401.6563 555.3125,401.3594 555.5625,401.2031 C555.7188,401.1094 555.8438,401.0938 556.2813,401.0938 L561.4219,401.0938 C561.875,401.0938 562.0156,401.125 562.1875,401.2344 C562.4219,401.4063 562.5313,401.6719 562.5313,401.9375 C562.5313,402.2344 562.3906,402.5156 562.125,402.6719 C562,402.75 561.8125,402.7813 561.4219,402.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="34" x="579.25" y="410.1543">Store</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="399.5" x2="760.5" y1="422" y2="422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="399.5" x2="760.5" y1="430" y2="430"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="404.5" y="444.2104">Add(obj interface{}) error</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="404.5" y="457.0151">Update(obj interface{}) error</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="404.5" y="469.8198">Delete(obj interface{}) error</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="404.5" y="482.6245">List() []interface{}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="404.5" y="495.4292">ListKeys() []string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="346" x="404.5" y="508.2339">Get(obj interface{}) (item interface{}, exists bool, err error)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="351" x="404.5" y="521.0386">GetByKey(key string) (item interface{}, exists bool, err error)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="404.5" y="533.8433">Replace([]interface{}, string) error</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="404.5" y="546.6479">Resync() error</text><!--class Queue--><rect fill="#FEFECE" filter="url(#fioa27j4sw9s7)" height="112.0234" id="Queue" style="stroke: #A80036; stroke-width: 1.5;" width="247" x="74.5" y="415.5"/><ellipse cx="173.75" cy="431.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M174.7031,428.2813 L174.7031,434.7969 L176.4219,434.7969 C176.875,434.7969 177.0156,434.8281 177.1875,434.9531 C177.4219,435.125 177.5313,435.375 177.5313,435.6563 C177.5313,436.2188 177.1719,436.5 176.4219,436.5 L171.2813,436.5 C170.875,436.5 170.6719,436.4531 170.5156,436.3281 C170.2969,436.1719 170.1563,435.9063 170.1563,435.6563 C170.1563,435.3594 170.3125,435.0781 170.5625,434.9219 C170.7188,434.8125 170.8438,434.7969 171.2813,434.7969 L173,434.7969 L173,428.2813 L171.2813,428.2813 C170.8594,428.2813 170.6719,428.25 170.5156,428.1406 C170.2969,427.9688 170.1563,427.7188 170.1563,427.4375 C170.1563,427.1563 170.3125,426.8594 170.5625,426.7031 C170.7188,426.6094 170.8438,426.5938 171.2813,426.5938 L176.4219,426.5938 C176.875,426.5938 177.0156,426.625 177.1875,426.7344 C177.4219,426.9063 177.5313,427.1719 177.5313,427.4375 C177.5313,427.7344 177.3906,428.0156 177.125,428.1719 C177,428.25 176.8125,428.2813 176.4219,428.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="194.25" y="435.6543">Queue</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="75.5" x2="320.5" y1="447.5" y2="447.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="80.5" y="461.7104">Store</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="75.5" x2="320.5" y1="468.3047" y2="468.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="235" x="80.5" y="482.5151">Pop(PopProcessFunc) (interface{}, error)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="80.5" y="495.3198">AddIfNotPresent(interface{}) error</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="80.5" y="508.1245">HasSynced() bool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="80.5" y="520.9292">Close()</text><!--link Controller to controller--><path d="M350,114.67 C350,139.97 350,168.717 350,192.39 " fill="none" id="Controller-controller" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="343,114.415,350,94.415,357,114.415,343,114.415" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Config to controller--><path d="M220.391,242 C227.473,242 234.556,242 241.639,242 " fill="none" id="Config-controller" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="254.818,242,248.818,238,242.818,242,248.818,246,254.818,242" style="stroke: #A80036; stroke-width: 1.0;"/><!--link controller to Reflector--><path d="M458.201,242 C465.437,242 472.672,242 479.908,242 " fill="none" id="controller-Reflector" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="445.177,242,451.177,246,457.177,242,451.177,238,445.177,242" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Reflector to Store--><path d="M604.048,343.267 C601.108,358.823 598.104,374.72 595.259,389.772 " fill="none" id="Reflector-Store" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="606.498,330.307,601.4532,335.4597,604.2693,342.0982,609.314,336.9455,606.498,330.307" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Config to Queue--><path d="M143.108,323.582 C154.449,353.937 167.08,387.745 177.365,415.27 " fill="none" id="Config-Queue" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="138.503,311.258,136.8561,318.2785,142.7032,322.4989,144.3501,315.4784,138.503,311.258" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Queue to Store--><path d="M335.024,471.5 C356.179,471.5 377.334,471.5 398.489,471.5 " fill="none" id="Queue-Store" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="321.852,471.5,327.852,475.5,333.852,471.5,327.852,467.5,321.852,471.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
interface Controller {
  Run(stopCh <-chan struct{})
  HasSynced() bool
  LastSyncResourceVersion() string
}

class controller {
  +config         Config
  +reflector      *Reflector
  +reflectorMutex sync.RWMutex
  +clock          clock.Clock
}
Controller <|.. controller
controller o.left. Config
controller o.right. Reflector

class Reflector {
  +name string
  +expectedType reflect.Type
  +store Store
  +listerWatcher ListerWatcher
  +period       time.Duration
  +resyncPeriod time.Duration
  +ShouldResync func() bool
  +clock clock.Clock
  +lastSyncResourceVersion string
  +lastSyncResourceVersionMutex sync.RWMutex
}
Reflector o.. Store

class Config {
  +Queue
  +ListerWatcher
  +Process ProcessFunc
  +ObjectType runtime.Object
  +FullResyncPeriod time.Duration
  +ShouldResync ShouldResyncFunc
  +RetryOnError bool
}
Config o.. Queue

interface Queue {
  Store
  Pop(PopProcessFunc) (interface{}, error)
  AddIfNotPresent(interface{}) error
  HasSynced() bool
  Close()
}
Queue o. Store

interface Store {
  Add(obj interface{}) error
  Update(obj interface{}) error
  Delete(obj interface{}) error
  List() []interface{}
  ListKeys() []string
  Get(obj interface{}) (item interface{}, exists bool, err error)
  GetByKey(key string) (item interface{}, exists bool, err error)
  Replace([]interface{}, string) error
  Resync() error
}
@enduml

PlantUML version 1.2017.16beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
